<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://example.com/Tests/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Tests - 2D Materials Project</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Tests";
        var mkdocs_page_input_path = "Tests.md";
        var mkdocs_page_url = "/Tests/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 2D Materials Project
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../DataFlowDiagram/">Dataflow Diagram</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Pseudocode/">Pseudocode</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Tests</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Workflow/">Workflow</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">2D Materials Project</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">Tests</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>The purpose of the unit tests is to ensure that each unit/section of the workflow works as expected. In this project, I have employed auto-generated unit test. Full details about the tests for this project can be found in the <a href="https://github.com/ibuliyaminu/Computational_Workflow_Project_for_2D_Materials/tree/Test/snakemake_envr/.tests/unit">tests branch</a> on Github. But, I will give a short explanation below.</p>
<h2 id="step-1">Step 1</h2>



<div class="doc doc-object doc-function">



<a id="test_create_BULK_d12_from_cif.test_create_BULK_d12_from_cif"></a>
  <div class="doc doc-contents first">

          <details class="quote">
            <summary> <code>test_create_BULK_d12_from_cif.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">test_create_BULK_d12_from_cif</span><span class="p">():</span>

    <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
        <span class="n">workdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;workdir&quot;</span>
        <span class="n">data_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/create_BULK_d12_from_cif/data&quot;</span><span class="p">)</span>
        <span class="n">expected_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/create_BULK_d12_from_cif/expected&quot;</span><span class="p">)</span>

        <span class="c1"># Copy data to the temporary workdir.</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span>

        <span class="c1"># dbg</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;result1/WTe2_BULK_OPTGEOM_TZ.d12&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

        <span class="c1"># Run the test job.</span>
        <span class="n">sp</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span>
            <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;snakemake&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;result1/WTe2_BULK_OPTGEOM_TZ.d12&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-f&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;-j1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--keep-target-files&quot;</span><span class="p">,</span>

            <span class="s2">&quot;--directory&quot;</span><span class="p">,</span>
            <span class="n">workdir</span><span class="p">,</span>
        <span class="p">])</span>

        <span class="c1"># Check the output byte by byte using cmp.</span>
        <span class="c1"># To modify this behavior, you can inherit from common.OutputChecker in here</span>
        <span class="c1"># and overwrite the method `compare_files(generated_file, expected_file), </span>
        <span class="c1"># also see common.py.</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OutputChecker</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">expected_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>This checks the functionality of the conversion of cif file to d12 file. The function takes some parameters from the input file (<strong>WTe2</strong>) to generate the output file (<strong>.d12</strong>) as expected. It has been confirmed that this part works fine.</p>
<h2 id="step-2">Step 2</h2>



<div class="doc doc-object doc-function">



<a id="test_check_errored_output.test_check_errored_output"></a>
  <div class="doc doc-contents first">

          <details class="quote">
            <summary> <code>test_check_errored_output.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">test_check_errored_output</span><span class="p">():</span>

    <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
        <span class="n">workdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;workdir&quot;</span>
        <span class="n">data_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/check_errored_output/data&quot;</span><span class="p">)</span>
        <span class="n">expected_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/check_errored_output/expected&quot;</span><span class="p">)</span>

        <span class="c1"># Copy data to the temporary workdir.</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span>

        <span class="c1"># dbg</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;result2/completelist.csv result2/errorlist.csv&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

        <span class="c1"># Run the test job.</span>
        <span class="n">sp</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span>
            <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;snakemake&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;result2/completelist.csv result2/errorlist.csv&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-f&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;-j1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--keep-target-files&quot;</span><span class="p">,</span>

            <span class="s2">&quot;--directory&quot;</span><span class="p">,</span>
            <span class="n">workdir</span><span class="p">,</span>
        <span class="p">])</span>

        <span class="c1"># Check the output byte by byte using cmp.</span>
        <span class="c1"># To modify this behavior, you can inherit from common.OutputChecker in here</span>
        <span class="c1"># and overwrite the method `compare_files(generated_file, expected_file), </span>
        <span class="c1"># also see common.py.</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OutputChecker</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">expected_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>After the optimization step has been completed, the next step is to confirm if there is any error in the output file. So, this section of the test confirms the functionality of the code. It has been confirmed that this section also works fine.</p>
<h2 id="step-3">Step 3</h2>



<div class="doc doc-object doc-function">



<a id="test_convert_output_to_cif.test_convert_output_to_cif"></a>
  <div class="doc doc-contents first">

          <details class="quote">
            <summary> <code>test_convert_output_to_cif.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">test_convert_output_to_cif</span><span class="p">():</span>

    <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
        <span class="n">workdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;workdir&quot;</span>
        <span class="n">data_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/convert_output_to_cif/data&quot;</span><span class="p">)</span>
        <span class="n">expected_path</span> <span class="o">=</span> <span class="n">PurePosixPath</span><span class="p">(</span><span class="s2">&quot;.tests/unit/convert_output_to_cif/expected&quot;</span><span class="p">)</span>

        <span class="c1"># Copy data to the temporary workdir.</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span>

        <span class="c1"># dbg</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;data3/WTe2_BULK_OPTGEOM_TZ.cif&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

        <span class="c1"># Run the test job.</span>
        <span class="n">sp</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span>
            <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;snakemake&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;data3/WTe2_BULK_OPTGEOM_TZ.cif&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-f&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;-j1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--keep-target-files&quot;</span><span class="p">,</span>

            <span class="s2">&quot;--directory&quot;</span><span class="p">,</span>
            <span class="n">workdir</span><span class="p">,</span>
        <span class="p">])</span>

        <span class="c1"># Check the output byte by byte using cmp.</span>
        <span class="c1"># To modify this behavior, you can inherit from common.OutputChecker in here</span>
        <span class="c1"># and overwrite the method `compare_files(generated_file, expected_file), </span>
        <span class="c1"># also see common.py.</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OutputChecker</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">expected_path</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>After the optimization, the output structure has to be vizualized. To achieve this, the output file (<strong>.out</strong>) must be converted to cif file (<strong>.cif</strong>). As expected, this section also works well.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Pseudocode/" class="btn btn-neutral float-left" title="Pseudocode"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Workflow/" class="btn btn-neutral float-right" title="Workflow">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Pseudocode/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Workflow/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
